<!--pages/index/index.wxml-->
<view class="container {{themeClass}}">
  <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
  <view class="status-bar">
    <view class="app-title">ç –äº†ä¹ˆ</view>
    <view class="current-time">{{currentTime}}</view>
    <view class="settings-btn" bindtap="showSettingsPanel">âš™ï¸</view>
  </view>

  <!-- ä»Šæ—¥æ”¶ç›Šå¡ç‰‡ -->
  <view class="card income-card" bindtap="navigateToIncome">
    <view class="card-header">
      <view class="card-title">ä»Šæ—¥æ”¶ç›Š</view>
      <view class="card-subtitle">{{todayIncome.isTodayWorkday ? 'å·¥ä½œæ—¥' : 'ä¼‘æ¯æ—¥'}}</view>
    </view>
    
    <view class="income-content">
      <view class="income-amount" animation="{{incomeAnimation}}">
        <text class="currency">Â¥</text>
        <text class="amount">{{todayIncome.todayEarned}}</text>
      </view>
      <view class="income-simple-info">
        <text class="simple-label">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</text>
      </view>
    </view>
  </view>

  <!-- å¿«æ·å¯¼èˆª -->
  <view class="nav-grid">
    <view class="nav-item" bindtap="navigateToDepreciation">
      <view class="nav-icon">ğŸ“±</view>
      <view class="nav-title">ç‰©å“æˆæœ¬</view>
      <view class="nav-desc">{{itemStats.totalItems}}ä»¶ç‰©å“</view>
    </view>
    
    <view class="nav-item" bindtap="navigateToRetirement">
      <view class="nav-icon">â°</view>
      <view class="nav-title">é€€ä¼‘å€’è®¡æ—¶</view>
      <view class="nav-desc">{{retirement.daysToRetirement}}å¤©</view>
    </view>
  </view>

  <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
  <view class="stats-section">
    <view class="section-title">æ•°æ®æ¦‚è§ˆ</view>
    
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-value">Â¥{{itemStats.totalCost}}</view>
        <view class="stat-label">æ€»è´­ä¹°æˆæœ¬</view>
      </view>
      
      <view class="stat-item">
        <view class="stat-value">Â¥{{itemStats.totalUsedCost}}</view>
        <view class="stat-label">å·²ç”¨æˆæœ¬</view>
      </view>
      
      <view class="stat-item">
        <view class="stat-value">{{retirement.workdaysToRetirement}}</view>
        <view class="stat-label">å‰©ä½™å·¥ä½œæ—¥</view>
      </view>
      
      <view class="stat-item">
        <view class="stat-value">{{retirement.workhourToRetirement}}</view>
        <view class="stat-label">å‰©ä½™å·¥ä½œæ—¶</view>
      </view>
    </view>
  </view>

  <!-- è®¾ç½®é¢æ¿ -->
  <view class="settings-panel {{showSettings ? 'show' : ''}}" bindtap="hideSettingsPanel">
    <view class="settings-content" catchtap="stopPropagation">
      <view class="settings-header">
        <view class="settings-title">åå¥½è®¾ç½®</view>
        <view class="close-btn" bindtap="hideSettingsPanel">Ã—</view>
      </view>
      
      <scroll-view scroll-y class="settings-body">
        <view class="setting-section">
          <view class="section-title">ä¸»é¢˜è®¾ç½®</view>
          
          <view class="setting-item">
            <text class="setting-label">ä¸»é¢˜é£æ ¼</text>
            <picker range="{{['é»˜è®¤ä¸»é¢˜', 'åƒç´ é£']}}" value="{{prefs.theme === 'pixel' ? 1 : 0}}" bindchange="onThemeChange">
              <view class="picker-display">{{prefs.theme === 'pixel' ? 'åƒç´ é£' : 'é»˜è®¤ä¸»é¢˜'}}</view>
            </picker>
          </view>
          
          <view class="setting-item" wx:if="{{prefs.theme === 'pixel'}}">
            <text class="setting-label">åƒç´ é£é…è‰²</text>
            <picker range="{{['è–„è·è‰²', 'æ—¥è½æ©™', 'è‘¡è„ç´«', 'æµ·æ´‹è“', 'æ£®æ—ç»¿', 'ç«ç‘°é‡‘']}}" value="{{getPixelColorIndex(prefs.pixelColor)}}" bindchange="onPixelColorChange">
              <view class="picker-display">{{getPixelColorLabel(prefs.pixelColor)}}</view>
            </picker>
          </view>
        </view>
        
        <view class="setting-section">
          <view class="section-title">åŠ¨æ•ˆè®¾ç½®</view>
          
          <view class="setting-item">
            <view class="setting-label">å¼€å¯æ”¶ç›ŠåŠ¨æ•ˆ</view>
            <switch checked="{{prefs.enableIncomeAnimation}}" bindchange="onAnimationToggle" />
          </view>
        </view>
        
        <view class="setting-help">
          <text>â€¢ æ›´å¤šè¯¦ç»†è®¾ç½®è¯·åˆ°å¯¹åº”åŠŸèƒ½é¡µé¢è¿›è¡Œé…ç½®</text>
          <text>â€¢ è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°</text>
        </view>
      </scroll-view>
      
      <view class="settings-footer">
        <view class="setting-btn primary" bindtap="hideSettingsPanel">å®Œæˆ</view>
      </view>
    </view>
  </view>
</view>


